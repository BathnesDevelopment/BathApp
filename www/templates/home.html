<ion-view view-title="Residents app">
    <ion-content padding="false">
        <div class="row responsive-sm">
            <div class="col">
                <div class="card">
                    <div id="divLogo" class="item item-image">
                        <img src="images/logo.svg" />
                    </div>
                    <div class="item tabs item-divider tabs-primary tabs-icon-left">
                        <a class="tab-item" ng-click="showPopup('Bath &amp North East Somerset Council App', 'The Bath &amp North East Somerset Council residents app provides reporting facilities to easily connect with the Council and report issues')">
                            <i class="icon positive ion-information-circled"></i> Info
                        </a>
                        <a class="tab-item" ng-click="textTo('07904649678','Bath app message: ')">
                            <i class="icon energized ion-android-textsms"></i> Text
                        </a>
                        <a class="tab-item" ng-click="emailTo('councilconnect@bathnes.gov.uk')">
                            <i class="icon royal ion-at"></i> Email
                        </a>
                        <a class="tab-item" ng-click="showCouncilConnectPopup()">
                            <i class="icon balanced ion-ios-telephone"></i> Call
                        </a>
                    </div>
                </div>
                <h5 class="card-header" ng-if="news && news['Council news'] && news['Council news'][0]">Latest news</h5>
                <div class="card">
                    <div class="item item-divider top-calm">
                        {{ news['Council news'][0].Name }}
                    </div>
                    <div class="item item-text-wrap">
                        <p ng-bind="">{{ news['Council news'][0].Summary }}</p>
                    </div>
                    <div class="item item-divider tabs tabs-primary tabs-icon-left">
                        <a class="tab-item" ng-click="updateNews()">
                            <i class="icon balanced ion-refresh"></i> Refresh
                        </a>
                    </div>
                </div>
                <h5 class="card-header" ng-if="userData.uprn">Personal details</h5>
                <div class="card" ng-if="userData.uprn">
                    <div class="item item-divider top-calm">
                        <span ng-if="userData.firstname">({{ userData.firstname + ' ' + userData.lastname }})</span>
                    </div>
                    <div class="item item-text-wrap">
                        <p>Information about any details held about you on this device.  To clear the data held on the device, use the link below.</p>
                    </div>
                    <div class="item item-divider tabs tabs-primary tabs-icon-left">
                        <a class="tab-item" ng-click="deleteData()">
                            <i class="icon assertive ion-android-delete"></i> Remove all data
                        </a>
                    </div>
                </div>
            </div>
            <div class="col">
                <h5 class="card-header" ng-if="!userData.uprn">Location</h5>
                <div class="card" ng-if="!userData.uprn">
                    <div class="item item-divider top-assertive">
                        No details or location set
                    </div>
                    <div class="item item-text-wrap">
                        <p>To begin using this app you need to register and set a location.  Personal details will only be used to customise data shown in the app, and pre-populate report/comment forms.</p>
                    </div>
                    <div class="item item-divider tabs tabs-primary tabs-icon-left">
                        <a class="tab-item" ng-click="register()">
                            <i class="icon balanced ion-ios-location"></i> Set location
                        </a>
                    </div>
                </div>
                <h5 class="card-header" ng-if="userData.address">Address details</h5>
                <div class="card" ng-if="userData.address">
                    <div class="item item-text-wrap">
                        <p>{{ userData.address }}</p>
                    </div>
                </div>
                <h5 class="card-header" ng-if="userData.phone">Contact details</h5>
                <div class="card" ng-if="userData.phone">
                    <div class="item item-text-wrap">
                        <p>
                            {{ userData.phone }}<br />
                            {{ userData.email }}
                        </p>
                    </div>
                </div>
                <h5 class="card-header" ng-if="carParkData[0].values.length > 0">Car parks</h5>
                <div class="card" ng-if="carParkData[0].values.length > 0">
                    <div class="item item-divider item-text-wrap top-royal">
                        Available spaces
                    </div>
                    <div class="item item-text-wrap">
                        <!--<highchart id="chtCarParks" config="carParkChart"></highchart>-->
                        <div id="divCarParks"><nvd3 options="carParkOptions" data="carParkData"></nvd3></div>
                    </div>
                    <div class="item item-divider tabs tabs-primary tabs-icon-left">
                        <a class="tab-item" ng-click="updateCarParks()">
                            <i class="icon balanced ion-refresh"></i> Refresh
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>